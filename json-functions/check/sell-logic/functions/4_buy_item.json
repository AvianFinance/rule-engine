{
  "function_name": "buyItem",
  "input_parameters": "address nftAddress, uint256 tokenId",
  "visibility": "external",
  "state_mutability": "payable",
  "returns": "string memory",
  "return_line": "'NFT successfully Bought'",
  "events": [
    "SellNftBought(msg.sender, nftAddress, tokenId, listedItem.price)"
  ],
  "modifiers": [
    "nonReentrant",
    "isSellListed(nftAddress, tokenId)"
  ],
  "requires": [
    [
      "MarketplaceIsApproved(nftAddress, tokenId)",
      "Marketplace is not aproved"
    ],
    [
      "isNotRented(nftAddress, tokenId)",
      "NFT Already rented"
    ]
  ],
  "body": [
    [
      "load_listing",
      [
        "sell",
        "nftAddress",
        "tokenId"
      ]
    ],
    [
      "is_listing_fee_met",
      [
        "listing.price"
      ]
    ],
    [
      "add_proceeds",
      [
        "sell"
      ]
    ],
    [
      "delete_listing",
      [
        "nftAddress",
        "tokenId"
      ]
    ],
    [
      "owner_transfer",
      [
        "nftAddress",
        "tokenId"
      ]
    ]
  ]
}